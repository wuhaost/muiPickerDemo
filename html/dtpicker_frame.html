<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <title>日期选择</title>
    <link rel="stylesheet" type="text/css" href="../css/aui.css" />
    <link rel="stylesheet" href="../css/mui/dist/css/mui.min.css">
    <link rel="stylesheet" href="../css/mui/plugin/picker/dist/css/mui.picker.min.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/static.css">
    <script type="text/javascript" src="../script/api.js"></script>
    <script type="text/javascript" src="../css/mui/dist/js/mui.min.js"></script>
    <script type="text/javascript" src="../css/mui/plugin/picker/dist/js/mui.picker.all.static.js"></script>
    <style>
    html,
    body {
        display: -webkit-box;
        display: -webkit-flex;
        display: flex;
        -webkit-box-orient: vertical;
        -webkit-flex-flow: column;
        flex-flow: column;
        height: 100%;
        background-color: transparent;
    }
    section {
        -webkit-box-flex: 1;
        -webkit-flex: 1;
        flex: 1;
        overflow: auto;
    }
    </style>
</head>

<body>
    <section tapmode onclick="fnCloseFrame();"></section>
</body>
<script type="text/javascript">
apiready = function() {
    var winName = api.pageParam.winName;
    var dateType = api.pageParam.dateType;
    var currentDate = new Date();
    var year = currentDate.getFullYear();
    var month = currentDate.getMonth();
    if ('year' == dateType) {
        var dtPicker = new mui.DtPicker({
            type: 'year',//设置日历初始视图模式
            beginDate: new Date(year-4, 0),//设置开始日期
            endDate: new Date(year, month)//设置结束日期
        });
        dtPicker.show(function (selectItems) {
            console.info(selectItems.y.value);
        })
    } else if ('month' == dateType){
        var dtPicker = new mui.DtPicker({
            type: 'month',//设置日历初始视图模式
            beginDate: new Date(year-4, 0),//设置开始日期
            endDate: new Date(year, month)//设置结束日期
        });
        dtPicker.show(function (selectItems) {
            console.info(selectItems.y.value + ',' + selectItems.m.value);
        })
    } else if ('quarter' == dateType){
        var dtPicker = new mui.DtPicker({
            type: 'quarter',//设置日历初始视图模式
            beginDate: new Date(year-4, 0),//设置开始日期
            endDate: new Date(year, month)//设置结束日期
        });
        dtPicker.show(function (selectItems) {
            console.info(selectItems.y.value + ',' + selectItems.q.value);
        })
    }
};
function fnCloseFrame() {
    api.closeFrame();
}
</script>

</html>
